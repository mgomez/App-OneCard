<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>OneCard</title>        
        <script src="js/jquery_1.5.2.min.js"></script>
    </head>
    <body>
        <div id="ocsi">            
            <div class="blink">
                <h1><img src="img/logo.png" alt=""><br><small>Cargando...</small></h1>                
            </div>
        </div>   
        <p>
            <a href="#" id="login-with-facebook">LOGIN FACEBOOK</a>s
        </p>
        <script src="phonegap.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/PushNotification.js"></script>             
        <script>
!function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,i=/BlackBerry/i,j=/BB10/i,k=/Opera Mini/i,l=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),n=function(a,b){return a.test(b)},o=function(a){var o=a||navigator.userAgent;return this.apple={phone:n(b,o),ipod:n(c,o),tablet:n(d,o),device:n(b,o)||n(c,o)||n(d,o)},this.android={phone:n(e,o),tablet:!n(e,o)&&n(f,o),device:n(e,o)||n(f,o)},this.windows={phone:n(g,o),tablet:n(h,o),device:n(g,o)||n(h,o)},this.other={blackberry:n(i,o),blackberry10:n(j,o),opera:n(k,o),firefox:n(l,o),device:n(i,o)||n(j,o)||n(k,o)||n(l,o)},this.seven_inch=n(m,o),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},p=function(){var a=new o;return a.Class=o,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=o:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=p():"function"==typeof define&&define.amd?define(a.isMobile=p()):a.isMobile=p()}(this);
var android = isMobile.android.device;
var ios = isMobile.apple.device;
var phone = isMobile.phone;
var pushNotification;
var networkState;
document.addEventListener('deviceready', onDeviceReady, false);

function onDeviceReady() {
    networkState = navigator.connection.type;
    if (navigator.notification) {
        window.alert = function(message) {
            navigator.vibrate(100)
            navigator.notification.alert(message, null, "OneCard", 'OK');
        };
    }
    if (networkState != 'none') {
        navigator.vibrate(1000);
        //var win = window.open("https://www.onecardservicios.mx/Extranet/AppOneCard/Account/Login");
    } else {
        navigator.notification.alert('Intentelo de nuevo conectado cuando tenga acceso a internet', function() {
            navigator.app.exitApp();
        }, 'OneCard', 'Ok');
    }
    if (ios) {
        setTimeout(function() {
            navigator.splashscreen.hide();
        }, 2000);
    }
    //Login Facebook
    var login = function() {
        if (!window.cordova) {
            var appId = prompt("Enter FB Application ID", "");
            facebookConnectPlugin.browserInit(appId);
        }
        facebookConnectPlugin.login(["email"], function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var showDialog = function() {
        facebookConnectPlugin.showDialog({
            method: "feed"
        }, function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var apiTest = function() {
        facebookConnectPlugin.api("me/?fields=id,email", ["user_birthday"], function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var logPurchase = function() {
        facebookConnectPlugin.logPurchase(1.99, "USD", function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var logEvent = function() {
        // For more information on AppEvent param structure see
        // https://developers.facebook.com/docs/ios/app-events
        // https://developers.facebook.com/docs/android/app-events
        facebookConnectPlugin.logEvent("Purchased", {
            NumItems: 1,
            Currency: "USD",
            ContentType: "shoes",
            ContentID: "HDFU-8452"
        }, null, function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var getAccessToken = function() {
        facebookConnectPlugin.getAccessToken(function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var getStatus = function() {
        facebookConnectPlugin.getLoginStatus(function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
    var logout = function() {
        facebookConnectPlugin.logout(function(response) {
            alert(JSON.stringify(response))
        }, function(response) {
            alert(JSON.stringify(response))
        });
    }
}
var loginButton = $('#login-with-facebook');
loginButton.on('click', function(e) {
    e.preventDefault();
    login();
});       
        </script>
    </body>
</html>
